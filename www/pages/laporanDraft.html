<!DOCTYPE html>
<html>

<head>

    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src="../cordova.js"></script>
    <script type="text/javascript" src="../js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../js/framework7.js"></script>
    <script type="text/javascript" src="../js/framework7.min.js"></script>
    <script type="text/javascript" src="../js/framework7.bundle.min.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/table.css">
    <link rel="stylesheet" type="text/css" href="../css/boot.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" type="text/css" href="../css/input.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>ProLight</title>
</head>

<style>
    .button {
        background-color: #008CBA;
        /* Green */
        border: none;
        color: white;
        padding: 8px 16px;
        text-align: center;
        text-decoration: none;
    }

    .loading {
        position: fixed;
        z-index: 999;
        height: 2em;
        width: 2em;
        overflow: visible;
        margin: auto;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }

    /* Transparent Overlay */
    .loading:before {
        content: '';
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3);
    }

    /* :not(:required) hides these rules from IE9 and below */
    .loading:not(:required) {
        /* hide "loading..." text */
        font: 0/0 a;
        color: transparent;
        text-shadow: none;
        background-color: transparent;
        border: 0;
    }

    .loading:not(:required):after {
        content: '';
        display: block;
        font-size: 10px;
        width: 1em;
        height: 1em;
        margin-top: -0.5em;
        -webkit-animation: spinner 1500ms infinite linear;
        -moz-animation: spinner 1500ms infinite linear;
        -ms-animation: spinner 1500ms infinite linear;
        -o-animation: spinner 1500ms infinite linear;
        animation: spinner 1500ms infinite linear;
        border-radius: 0.5em;
        -webkit-box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.5) -1.5em 0 0 0, rgba(0, 0, 0, 0.5) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
        box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) -1.5em 0 0 0, rgba(0, 0, 0, 0.75) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
    }

    /* Animation */

    @-webkit-keyframes spinner {
        0% {
            -webkit-transform: rotate(0deg);
            -moz-transform: rotate(0deg);
            -ms-transform: rotate(0deg);
            -o-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            -moz-transform: rotate(360deg);
            -ms-transform: rotate(360deg);
            -o-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    @-moz-keyframes spinner {
        0% {
            -webkit-transform: rotate(0deg);
            -moz-transform: rotate(0deg);
            -ms-transform: rotate(0deg);
            -o-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            -moz-transform: rotate(360deg);
            -ms-transform: rotate(360deg);
            -o-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    @-o-keyframes spinner {
        0% {
            -webkit-transform: rotate(0deg);
            -moz-transform: rotate(0deg);
            -ms-transform: rotate(0deg);
            -o-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            -moz-transform: rotate(360deg);
            -ms-transform: rotate(360deg);
            -o-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    @keyframes spinner {
        0% {
            -webkit-transform: rotate(0deg);
            -moz-transform: rotate(0deg);
            -ms-transform: rotate(0deg);
            -o-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            -moz-transform: rotate(360deg);
            -ms-transform: rotate(360deg);
            -o-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    .hidden {
        display: none;
    }
</style>

<body>
    <header>
        <div class="hamburger">
            <i class="fas fa-bars"></i>
            <i class="fas fa-times"></i>
        </div>
        <nav class="sidebar">
            <ul class="nav-list">
                <li class="nav-item">
                    <a onclick="goHome()" class="nav-link current">
                        <i class="fas fa-home"></i>Menu Utama
                    </a>
                </li>

                <li class="nav-item">
                    <a onclick="goSenarai()" class="nav-link">
                        <i class="fas fa-address-card"></i>Senarai Tugas
                    </a>
                </li>
                <li class="nav-item">
                    <a onclick="goStatus()" class="nav-link">
                        <i class="fas fa-briefcase"></i>Status Laporan
                    </a>
                </li>

                <li class="nav-item">
                    <a onclick="goStatistik()" class="nav-link">
                        <i class="fas fa-blog"></i>Statistik Tugasan
                    </a>
                </li>

                <li class="nav-item">
                    <a onclick="goPapan()" class="nav-link">
                        <i class="fas fa-envelope"></i>Papan Skor
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <div id="load"></div>
        <div class="zoom-content">
            <section>
                <p class="titlereg-report">Draft</p>
                <div class="container position-tab">
                    <ul class="nav nav-tabs ">
                        <li class="active"><a onclick="paging('Draf')">Draf</a></li>
                        <li><a onclick="paging('Selesai')">Selesai</a></li>
                    </ul>
                    <br>
                    <center>
                        <div id="news"></div>
                    </center>
                </div>

            </section>
        </div>
    </main>
</body>

<script type="text/javascript" src="../js/script.js"></script>

<script>
    function paging(a) {
        if (a.localeCompare("Draf") == 0) {
            location.href = "laporanDraft.html";
        } else if (a.localeCompare("Selesai") == 0) {
            location.href = "laporanDone.html";
        }
    }
    Object.objsize = function (obj) {
        var size = 0,
            key;

        for (key in obj) {
            if (obj.hasOwnProperty(key))
                size++;
        }

        return size;

    };
    document.addEventListener("deviceready", onDeviceReady, false);
    var input = "";

    function onDeviceReady() {
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        var sizeOfList = Object.objsize(listPending);

        var x = 0;
        input +=
            "<table width='400' style='border: 1px solid #ddd;'><tr><th><p style='text-align: center'>Bil</p></th><th><p style='text-align: center'>Tarikh</p></th><th><p style='text-align: center'>No. Tiang</p></th><th style='text-align: center;' colspan='3' width='60px'>Tindakan</th></tr>";
        for (i = 0; i < sizeOfList; i++) {

            if (listPending[i] == undefined) {
                sizeOfList = sizeOfList + 1;
                continue;
            } else {
                if (listPending[i].Done == 0) {
                    input +=
                        "<tr><td style='padding: 10px 10px;font-size:8px;'>" + (x + 1) +
                        "</td><td><p style='font-size:8px'>" + listPending[i].Masa +
                        "</p></td><td><p style='font-size:8px'>" + listPending[i]
                        .NoTiang +
                        "</p></td><td><div class='buttonSeterusnyatable'  onclick='deleting(" + i +
                        ")'> Padam </div></td><td><div class='buttonSeterusnyatable' onclick='edit(" + i +
                        ")'> Ubah </div></td><td><div class='buttonSeterusnyatable' onclick='send(" + i +
                        ")'> Hantar </div></td></tr>";

                } else if (listPending[i].Done == 1) {
                    input +=
                        "<tr><td style='padding: 10px 10px;'>" + (x + 1) +
                        "</td><td>" + listPending[i].Masa + "</td><td>" + listPending[i].NoTiang +
                        "</td><td>Selesai</td></tr>";
                }
                x++;
            }

        }
        input += "</table>";
        document.getElementById('news').innerHTML = input;

    }

    //SECTION delete
    function deleting(i) {
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        delete listPending[i];
        localStorage.setItem('listPending', JSON.stringify(listPending));
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        var sizeOfList = Object.objsize(listPending);
        location.reload();
    }

    //SECTION edit
    function edit(i) {
        var flag = i;
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        var JenisKerja = listPending[flag].JenisKerja;

        //SECTION Check Jenis Kerja
        if ((JenisKerja.localeCompare("Ticket")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "ticket.html";

        } else if ((JenisKerja.localeCompare("Rondaan")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "rondaan.html";

        } else if ((JenisKerja.localeCompare("Rondaan Khas")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "rondaankhas.html";

        } else if ((JenisKerja.localeCompare("LED")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "led.html";

        } else if ((JenisKerja.localeCompare("Panel")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "panel.html";

        } else if ((JenisKerja.localeCompare("Daftar Aset")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "daftaraset.html";

        } else if ((JenisKerja.localeCompare("Senarai Semak")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "senaraisemak.html";

        } else if ((JenisKerja.localeCompare("Aduan")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "aduan.html";

        } else if ((JenisKerja.localeCompare("Imbangan Barang")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "imbangan.html";

        } else if ((JenisKerja.localeCompare("Imbangan Guna")) == "0") {
            localStorage.setItem("NumberOfObject", flag);
            window.location.href = "imbanganguna.html";

        }
    }

    //SECTION send
    function send(i) {
        //document.getElementById("load").innerHTML = "<div class='loading'>Loading&#8230;</div>";
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        var JenisKerja = listPending[i].JenisKerja;
        if ((JenisKerja.localeCompare("Senarai Semak")) == "0") {
            senaraiSemak();
        } else if ((JenisKerja.localeCompare("Imbangan Barang")) == "0") {
            imbanganBarang();
        } else if ((JenisKerja.localeCompare("Imbangan Guna")) == "0") {
            imbanganGuna();
        }



        var GambarTiangFlag,
            GambarSebelumFlag,
            GambarSelepasFlag,
            GambarTiangVal,
            GambarSebelumVal,
            GambarEarthingFlag,
            GambarEarthingVal,
            GambarTiangIPCFlag,
            GambarTiangIPCVal,
            GambarBlackBoxFlag,
            GambarBlackBoxVal,
            GambarSelepasVal;


        //gambar tiang
        var GambarTiangURI = listPending[i].GambarTiangURI;

        var options = new FileUploadOptions();
        options.fileKey = "file";
        options.fileName = GambarTiangURI.substr(GambarTiangURI.lastIndexOf('/') + 1);
        options.mimeType = "image/jpeg";

        var params = {};
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;
        options.chunkedMode = false;

        var ft = new FileTransfer();
        ft.upload(GambarTiangURI, "http://1.32.96.10/ProLight/mimi/test.php", function (result) {
            //alert('successfully uploaded ' + result.response);
            GambarTiangFlag = 1;
            GambarTiangVal = result.response;
            // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
            //localStorage.setItem("gambarsebelum", result.response);
            var JenisKerja = listPending[i].JenisKerja;
            if ((JenisKerja.localeCompare("Daftar Aset")) == "0") {
                daftarAset();
            }
        }, function (error) {
            alert('error : ' + JSON.stringify(error));
        }, options);

        //gambar sebelum
        var GambarSebelumURI = listPending[i].GambarSebelumURI;
        //image.src = GambarSebelumURI + '?' + Math.random();

        var options = new FileUploadOptions();
        options.fileKey = "file";
        options.fileName = GambarSebelumURI.substr(GambarSebelumURI.lastIndexOf('/') + 1);
        options.mimeType = "image/jpeg";

        var params = {};
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;
        options.chunkedMode = false;

        var ft = new FileTransfer();
        ft.upload(GambarSebelumURI, "http://1.32.96.10/ProLight/mimi/test2.php", function (result) {
            //alert('successfully uploaded ' + result.response);
            GambarSebelumFlag = 1;
            GambarSebelumVal = result.response;
            // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
            //localStorage.setItem("gambarsebelum", result.response);
        }, function (error) {
            alert('error : ' + JSON.stringify(error));
        }, options);



        //gambar selepas
        var GambarSelepasURI = listPending[i].GambarSelepasURI;

        var options = new FileUploadOptions();
        options.fileKey = "file";
        options.fileName = GambarSelepasURI.substr(GambarSelepasURI.lastIndexOf('/') + 1);
        options.mimeType = "image/jpeg";

        var params = {};
        params.value1 = "test";
        params.value2 = "param";

        options.params = params;
        options.chunkedMode = false;

        var ft = new FileTransfer();
        ft.upload(GambarSelepasURI, "http://1.32.96.10/ProLight/mimi/test3.php", function (result) {
            //alert('successfully uploaded ' + result.response);
            GambarSelepasFlag = 1;
            GambarSelepasVal = result.response;

            var JenisKerja = listPending[i].JenisKerja;

            if ((JenisKerja.localeCompare("Ticket")) == "0") {
                ticket();
            } else if ((JenisKerja.localeCompare("Rondaan")) == "0") {
                rondaan();
            } else if ((JenisKerja.localeCompare("Rondaan Khas")) == "0") {
                rondaanKhas();
            } else if ((JenisKerja.localeCompare("LED")) == "0") {
                led();
            } else if ((JenisKerja.localeCompare("Panel")) == "0") {
                panel();
            } else if ((JenisKerja.localeCompare("Aduan")) == "0") {
                aduan();
            }
            // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
            //localStorage.setItem("gambarselepas", result.response);
        }, function (error) {
            alert('error : ' + JSON.stringify(error));
        }, options);

        //ajax send

        //SECTION Jenis Kerja Ticket
        //NOTE DONE
        function ticket() {

            if (GambarSebelumFlag == 1 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                var dataFormreg = {
                    "daerah": listPending[i].Daerah,
                    "kumpulan": listPending[i].Kumpulan,
                    "jenisKerja": listPending[i].JenisKerja,
                    "latitude": listPending[i].Latitude,
                    "longitude": listPending[i].Longitude,
                    "noTiang": listPending[i].NoTiang,
                    "masa": listPending[i].Masa,
                    "ipc": listPending[i].IPC,
                    "pecu": listPending[i].Pecu,
                    "pecuqty": listPending[i].PecuQty,
                    "ipclantern": listPending[i].IPCLantern,
                    "lantern": listPending[i].Lantern,
                    "blackbox": listPending[i].Blackbox,
                    "fuse": listPending[i].Fuse,
                    "contractor": listPending[i].Contractor,
                    "link": listPending[i].Link,
                    "dawailampu": listPending[i].DawaiLampu,
                    "dawaipanel": listPending[i].DawaiPanel,
                    "cout": listPending[i].Cout,
                    "rombaklampu": listPending[i].RombakLampu,
                    "bracket": listPending[i].Bracket,
                    "rombakpanel": listPending[i].RombakPanel,
                    "gambartiang": GambarTiangVal,
                    "gambarsebelum": GambarSebelumVal,
                    "output": listPending[i].Output,
                    "clamp": listPending[i].Clamp,
                    "rentis": listPending[i].Rentis,
                    "dead": listPending[i].Dead,
                    "cable": listPending[i].Cable,
                    "mini": listPending[i].Mini,
                    "pusing": listPending[i].Pusing,
                    "jumperlantern": listPending[i].JumperLantern,
                    "jumperservice": listPending[i].JumperService,
                    "hook": listPending[i].Hook,
                    "creepers": listPending[i].Creepers,
                    "lanternwarranty": listPending[i].LanternWarranty,
                    "colorcode": listPending[i].ColorCode,
                    "tarikhtukar": listPending[i].TarikhTukar,
                    "setlantern": listPending[i].SetLantern,
                    "tukaripc": listPending[i].TukarIPC,
                    "lampurosak": listPending[i].LampuRosak,
                    "category": listPending[i].Category,
                    "gambarselepas": GambarSelepasVal,
                    "jenislampu": listPending[i].JenisLampu,
                    "chargeman": listPending[i].Chargeman,
                    "helper": listPending[i].Helper,
                    "driver": listPending[i].Driver,
                    "shift": listPending[i].Shift,
                    "ticket": listPending[i].Ticket,
                    "zon": listPending[i].Zon,
                    "bekalan": listPending[i].Bekalan,
                    "jalan": listPending[i].Jalan,
                    "lokasi": listPending[i].Lokasi,
                    "jenama": listPending[i].Jenama,
                    "size": listPending[i].Size,
                    "ipc120185": listPending[i].IPC120185,
                    "ipc1695": listPending[i].IPC1695,
                    "ipc20185": listPending[i].IPC20185,
                    "ipc1670": listPending[i].IPC1670,
                    "ipc2550": listPending[i].IPC2550,
                    "catatan": listPending[i].Catatan
                };

                localStorage.setItem("Flag", i);

                var dataString = JSON.stringify(dataFormreg);
                $.ajax({
                    url: 'http://1.32.96.10/ProLight/mimi/ticket.php',
                    data: {
                        myData: dataString
                    },
                    type: 'POST',
                    success: function (response) {
                        //TODO loading interface 
                        if (response == 1) {
                            var flagT = localStorage.getItem("Flag");
                            remove(flagT);
                        } else if (response == 0) {
                            alert("Kesilapan ketika memuatnaik data !!");
                        }


                    }
                });
            } else if (GambarSebelumFlag == 1 || GambarTiangFlag == 1 || GambarSelepasFlag == 1) {
                //001
                if (GambarSebelumFlag == 0 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert(
                        "Aplikasi mempunyai masalah untuk menuatnaik fail gambar sebelum & gambar tiang !!");
                }
                // 010
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum & gambar selepas !!");
                }
                //011
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum !!");
                }
                //100
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang & gambar selepas !!");
                }
                //101
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang !!");
                }
                //110
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar selepas !!");
                }
            } else {
                alert(" Aplikasi mempunyai masalah untuk muatnaik kesemua gamber !!");
            }
        }

        //SECTION Jenis Kerja Rondaan
        //NOTE DONE
        function rondaan() {
            if (GambarSebelumFlag == 1 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                var dataFormreg = {
                    "daerah": listPending[i].Daerah,
                    "kumpulan": listPending[i].Kumpulan,
                    "jenisKerja": listPending[i].JenisKerja,
                    "latitude": listPending[i].Latitude,
                    "longitude": listPending[i].Longitude,
                    "output": listPending[i].Output,
                    "notiang": listPending[i].NoTiang,
                    "rombak": listPending[i].Rombak,
                    "ipctype": listPending[i].IPCType,
                    "ipcqty": listPending[i].IPCQty,
                    "pecu": listPending[i].Pecu,
                    "pecuqty": listPending[i].PecuQty,
                    "ipclantern": listPending[i].IPCLantern,
                    "lantern": listPending[i].Lantern,
                    "box": listPending[i].Box,
                    "fuse": listPending[i].Fuse,
                    "contactor": listPending[i].Contractor,
                    "link": listPending[i].Link,
                    "dawailampu": listPending[i].DawaiLampu,
                    "dawaipanel": listPending[i].DawaiPanel,
                    "masa": listPending[i].Masa,
                    "lampurosak": listPending[i].LampuRosak,
                    "tarikhpenukaran": listPending[i].TarikhPenukaran,
                    "gambartiang": GambarTiangVal,
                    "gambarsebelum": GambarSebelumVal,
                    "bracket": listPending[i].Bracket,
                    "rombakpnl": listPending[i].RombakPanel,
                    "clamp": listPending[i].Clamp,
                    "rentis": listPending[i].Rentis,
                    "dead": listPending[i].Dead,
                    "cable": listPending[i].Cable,
                    "mini": listPending[i].Mini,
                    "pusing": listPending[i].Pusing,
                    "jumper": listPending[i].Jumper,
                    "hook": listPending[i].Hook,
                    "creeper": listPending[i].Creeper,
                    "setlantern": listPending[i].SetLantern,
                    "warna": listPending[i].Warna,
                    "cout": listPending[i].Cout,
                    "category": listPending[i].Category,
                    "catatan": listPending[i].Catatan,
                    "gambarselepas": GambarSelepasVal,
                    "jenislampu": listPending[i].JenisLampu,
                    "chargeman": listPending[i].Chargeman,
                    "helper": listPending[i].Helper,
                    "driver": listPending[i].Driver,
                    "shift": listPending[i].Shift,
                    "zon": listPending[i].Zon,
                    "bekalan": listPending[i].Bekalan,
                    "jalan": listPending[i].Jalan,
                    "lokasi": listPending[i].Lokasi,
                    "jenama": listPending[i].Jenama,
                    "size": listPending[i].Size,
                    "ipc120185": listPending[i].IPC120185,
                    "ipc1695": listPending[i].IPC1695,
                    "ipc20185": listPending[i].IPC20185,
                    "ipc1670": listPending[i].IPC1670,
                    "ipc2550": listPending[i].IPC2550,
                    "catatan": listPending[i].Catatan
                };

                localStorage.setItem("Flag", i);

                var dataString = JSON.stringify(dataFormreg);
                $.ajax({
                    url: 'http://1.32.96.10/ProLight/mimi/rondaan2.php',
                    data: {
                        myData: dataString
                    },
                    type: 'POST',
                    success: function (response) {
                        //TODO loading interface 
                        alert(response);
                        if (response == 1) {
                            var flagT = localStorage.getItem("Flag");
                            remove(flagT);
                        } else if (response == 0) {
                            alert("Kesilapan ketika memuatnaik data !!");
                        }


                    }
                });
            } else if (GambarSebelumFlag == 1 || GambarTiangFlag == 1 || GambarSelepasFlag == 1) {
                //001
                if (GambarSebelumFlag == 0 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert(
                        "Aplikasi mempunyai masalah untuk menuatnaik fail gambar sebelum & gambar tiang !!");
                }
                // 010
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum & gambar selepas !!");
                }
                //011
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum !!");
                }
                //100
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang & gambar selepas !!");
                }
                //101
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang !!");
                }
                //110
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar selepas !!");
                }
            } else {
                alert(" Aplikasi mempunyai masalah untuk muatnaik kesemua gamber !!");
            }
        }
        //SECTION Jenis Kerja Rondaan Khas
        //NOTE DONE
        function rondaanKhas() {
            if (GambarSebelumFlag == 1 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                var dataFormreg = {
                    "daerah": listPending[i].Daerah,
                    "kumpulan": listPending[i].Kumpulan,
                    "jenisKerja": listPending[i].JenisKerja,
                    "latitude": listPending[i].Latitude,
                    "longitude": listPending[i].Longitude,
                    "output": listPending[i].Output,
                    "notiang": listPending[i].NoTiang,
                    "rombak": listPending[i].Rombak,
                    "ipcqty": listPending[i].IPCQty,
                    "pecu": listPending[i].Pecu,
                    "pecuqty": listPending[i].PecuQty,
                    "ipclantern": listPending[i].IPCLantern,
                    "lantern": listPending[i].Lantern,
                    "box": listPending[i].Box,
                    "fuse": listPending[i].Fuse,
                    "contactor": listPending[i].Contactor,
                    "link": listPending[i].Link,
                    "dawailampu": listPending[i].DawaiLampu,
                    "dawaipanel": listPending[i].DawaiPanel,
                    "masa": listPending[i].Masa,
                    "lampurosak": listPending[i].LampuRosak,
                    "tarikhpenukaran": listPending[i].TarikhPenukaran,
                    "gambartiang": GambarTiangVal,
                    "gambarsebelum": GambarSebelumVal,
                    "bracket": listPending[i].Bracket,
                    "rombakpnl": listPending[i].RombakPanel,
                    "clamp": listPending[i].Clamp,
                    "rentis": listPending[i].Rentis,
                    "dead": listPending[i].Dead,
                    "cable": listPending[i].Cable,
                    "mini": listPending[i].Mini,
                    "pusing": listPending[i].Pusing,
                    "jumper": listPending[i].Jumper,
                    "hook": listPending[i].Hook,
                    "creeper": listPending[i].Creepers,
                    "setlantern": listPending[i].SetLantern,
                    "warna": listPending[i].Warna,
                    "category": listPending[i].Category,
                    "cout": listPending[i].Cout,
                    "catatan": listPending[i].Catatan,
                    "gambarselepas": GambarSelepasVal,
                    "jenislampu": listPending[i].JenisLampu,
                    "chargeman": listPending[i].Chargeman,
                    "helper": listPending[i].Helper,
                    "driver": listPending[i].Driver,
                    "shift": listPending[i].Shift,
                    "zon": listPending[i].Zon,
                    "bekalan": listPending[i].Bekalan,
                    "jalan": listPending[i].Jalan,
                    "lokasi": listPending[i].Lokasi,
                    "jenama": listPending[i].Jenama,
                    "size": listPending[i].Size,
                    "catatan": listPending[i].Catatan
                };

                localStorage.setItem("Flag", i);

                var dataString = JSON.stringify(dataFormreg);
                $.ajax({
                    url: 'http://1.32.96.10/ProLight/mimi/rondaankhas.php',
                    data: {
                        myData: dataString
                    },
                    type: 'POST',
                    success: function (response) {
                        //TODO loading interface 
                        if (response == 1) {
                            var flagT = localStorage.getItem("Flag");
                            remove(flagT);
                        } else if (response == 0) {
                            alert("Kesilapan ketika memuatnaik data !!");
                        }


                    }
                });
            } else if (GambarSebelumFlag == 1 || GambarTiangFlag == 1 || GambarSelepasFlag == 1) {
                //001
                if (GambarSebelumFlag == 0 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert(
                        "Aplikasi mempunyai masalah untuk menuatnaik fail gambar sebelum & gambar tiang !!");
                }
                // 010
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum & gambar selepas !!");
                }
                //011
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum !!");
                }
                //100
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang & gambar selepas !!");
                }
                //101
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang !!");
                }
                //110
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar selepas !!");
                }
            } else {
                alert(" Aplikasi mempunyai masalah untuk muatnaik kesemua gamber !!");
            }
        }
        //SECTION Jenis Kerja LED
        //NOTE DONE
        function led() {
            var GambarEarthingURI = listPending[i].GambarEarthingURI;
            //image.src = GambarSebelumURI + '?' + Math.random();

            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = GambarEarthingURI.substr(GambarEarthingURI.lastIndexOf('/') + 1);
            options.mimeType = "image/jpeg";

            var params = {};
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(GambarEarthingURI, "http://1.32.96.10/ProLight/mimi/gambarearthing.php", function (result) {
                //alert('successfully uploaded ' + result.response);
                GambarEarthingFlag = 1;
                GambarEarthingVal = result.response;
                // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
                //localStorage.setItem("gambarsebelum", result.response);
            }, function (error) {
                alert('error : ' + JSON.stringify(error));
            }, options);


            var GambarTiangIPCURI = listPending[i].GambarTiangIPCURI;
            //image.src = GambarSebelumURI + '?' + Math.random();

            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = GambarTiangIPCURI.substr(GambarTiangIPCURI.lastIndexOf('/') + 1);
            options.mimeType = "image/jpeg";

            var params = {};
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(GambarTiangIPCURI, "http://1.32.96.10/ProLight/mimi/gambarearthing.php", function (result) {
                //alert('successfully uploaded ' + result.response);
                GambarTiangIPCFlag = 1;
                GambarTiangIPCVal = result.response;
                // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
                //localStorage.setItem("gambarsebelum", result.response);
                if (GambarEarthingFlag == 1 && GambarTiangIPCFlag == 1) {

                    var dataFormreg = {
                        "daerah": listPending[i].Daerah,
                        "kumpulan": listPending[i].Kumpulan,
                        "jenisKerja": listPending[i].JenisKerja,
                        "latitude": listPending[i].Latitude,
                        "longitude": listPending[i].Longitude,
                        "output": listPending[i].Output,
                        "gambaripc": GambarTiangIPCVal,
                        "gambarearthing": GambarEarthingVal,
                        "gambarselepas": GambarSelepasVal,
                        "notiang": listPending[i].NoTiang,
                        "ballast": listPending[i].Ballast,
                        "lanternbaru": listPending[i].LanternBaru,
                        "bracket": listPending[i].Bracket,
                        "dawaipanel": listPending[i].DawaiPanel,
                        "mini": listPending[i].Mini,
                        "ipc": listPending[i].IPC,
                        "ipcqty": listPending[i].IPCQty,
                        "tiadaearthing": listPending[i].TiadaEarthing,
                        "kodwarna": listPending[i].KodWarna,
                        "lokasi": listPending[i].Lokasi,
                        "serahtugas": listPending[i].SerahTugas,
                        "masa": listPending[i].Masa,
                        "man": listPending[i].Man,
                        "helper": listPending[i].Helper,
                        "driver": listPending[i].Driver,
                        "shift": listPending[i].Shift,
                        "tukarlampu": listPending[i].TukarLampu,
                        "gambartiang": GambarTiangVal,
                        "gambarsebelum": GambarSebelumVal,
                        "noAkaun": listPending[i].NoAkuan,
                        "namaAkaun": listPending[i].NamaAkaun,
                        "jnsAkaun": listPending[i].JenisAkaun,
                        "zon": listPending[i].Zon,
                        "jalan": listPending[i].Jalan,
                        "bekalan": listPending[i].Bekalan,
                        "jenama": listPending[i].Jenama,
                        "size": listPending[i].Size,
                        "model": listPending[i].Model,
                        "pemula": listPending[i].Pemula,
                        "kawalan": listPending[i].Kawalan,
                        "pendaftar": listPending[i].Pendaftar,
                        "pEarthing": listPending[i].PEarthing,
                        "earthingbaru": listPending[i].EarthingBaru,
                        "selenggara": listPending[i].Selenggara,
                        "mini": listPending[i].Mini,
                        "bacaansebelum": listPending[i].BacaanSebelum,
                        "bacaanselepas": listPending[i].BacaanSelepas,
                        "nometer": listPending[i].NoMeter,
                        "pembaikan": listPending[i].Pembaikan,
                        "jenislampu": listPending[i].JenisLampu,
                        "category": listPending[i].Category,
                        "ipc120185": listPending[i].IPC120185,
                        "ipc1695": listPending[i].IPC1695,
                        "ipc20185": listPending[i].IPC120185,
                        "ipc1670": listPending[i].IPC1670,
                        "ipc2550": listPending[i].IPC2550,
                        "dawailampu": listPending[i].DawaiLampu,
                        "catatan": listPending[i].Catatan
                    };

                    localStorage.setItem("Flag", i);

                    var dataString = JSON.stringify(dataFormreg);
                    $.ajax({
                        url: 'http://1.32.96.10/ProLight/mimi/led.php',
                        data: {
                            myData: dataString
                        },
                        type: 'POST',
                        success: function (response) {
                            //TODO loading interface 
                            if (response == 1) {
                                var flagT = localStorage.getItem("Flag");
                                remove(flagT);
                            } else if (response == 0) {
                                alert("Kesilapan ketika memuatnaik data !!");
                            }


                        }
                    });

                } else if (GambarEarthingFlag == 1 || GambarTiangIPCFlag == 1) {
                    if (GambarEarthingFlag == 0) {
                        alert(
                            "Aplikasi mempunyai masalah untuk menuatnaik fail gambar earthing !!");
                    } else if (GambarTiangIPCFlag == 0) {
                        alert(
                            "Aplikasi mempunyai masalah untuk menuatnaik fail gambar tiang !!");
                    }
                } else {
                    alert(" Aplikasi mempunyai masalah untuk muatnaik gamber gambar tiang & earthing!!");
                }
            }, function (error) {
                alert('error : ' + JSON.stringify(error));
            }, options);



        }
        //SECTION Jenis Kerja Panel
        //NOTE DONE
        function panel() {
            var GambarBlackBoxURI = listPending[i].GambarBlackBoxURI;
            //image.src = GambarSebelumURI + '?' + Math.random();

            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = GambarBlackBoxURI.substr(GambarBlackBoxURI.lastIndexOf('/') + 1);
            options.mimeType = "image/jpeg";

            var params = {};
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(GambarBlackBoxURI, "http://1.32.96.10/ProLight/mimi/test2.php", function (result) {
                //alert('successfully uploaded ' + result.response);
                GambarBlackBoxFlag = 1;
                GambarBlackBoxVal = result.response;
                // masukkan nama file yg dihantar ke localstorage utk dirujuk semula
                //localStorage.setItem("gambarsebelum", result.response);
                if (GambarSebelumFlag == 1) {

                    var dataFormreg = {
                        "daerah": listPending[i].Daerah,
                        "kumpulan": listPending[i].Kumpulan,
                        "jenisKerja": listPending[i].JenisKerja,
                        "latitude": listPending[i].Latitude,
                        "longitude": listPending[i].Longitude,
                        "output": listPending[i].Output,

                        "notiang": listPending[i].NoTiang,
                        "shift": listPending[i].Shift,
                        "aduan": listPending[i].Aduan,
                        "lokasi": listPending[i].Lokasi,
                        "nometer": listPending[i].NoMeter,
                        "mengecatpanel": listPending[i].MengecatPanel,
                        "monkeypanel1": listPending[i].MonkeyPanel1,
                        "monkeypanel3": listPending[i].MonkeyPanel3,
                        "merombakpanel": listPending[i].MerombakPanel,
                        "pvc": listPending[i].PVC,
                        "mengecatpanelmeter": listPending[i].MengecatPanelMeter,
                        "pecuqty": listPending[i].PecuQty,
                        "contractor": listPending[i].Contractor,
                        "fius": listPending[i].Fius,
                        "masa": listPending[i].Masa,
                        "category": listPending[i].Category,
                        "gambartiang": GambarTiangVal,
                        "gambarsebelum": GambarSebelumVal,
                        "gambarselepas": GambarSelepasVal,

                        "pendawaian": listPending[i].Pendawaian,
                        "man": listPending[i].Man,
                        "helper": listPending[i].Helper,
                        "driver": listPending[i].Driver,
                        "merombakgantifius": listPending[i].MerombakGantiFius,
                        "ganti_1setfuse": listPending[i].Ganti1SetFuse,
                        "jalan": listPending[i].Jalan,
                        "pecu": listPending[i].Pecu,
                        "ipc120185": listPending[i].IPC120185,
                        "ipc1695": listPending[i].IPC1695,
                        "ipc20185": listPending[i].IPC20185,
                        "ipc1670": listPending[i].IPC1670,
                        "ipc2550": listPending[i].IPC2550,
                        "cable": listPending[i].Cable,
                        "catatan": listPending[i].Catatan,
                        "gambarblackbox": GambarBlackBoxVal,
                        "panel": listPending[i].Panel,
                        "overall": listPending[i].Overall
                    };

                    localStorage.setItem("Flag", i);

                    var dataString = JSON.stringify(dataFormreg);
                    $.ajax({
                        url: 'http://1.32.96.10/ProLight/mimi/panel.php',
                        data: {
                            myData: dataString
                        },
                        type: 'POST',
                        success: function (response) {
                            //TODO loading interface 
                            alert(response);
                            if (response == 1) {
                                var flagT = localStorage.getItem("Flag");
                                remove(flagT);
                            } else if (response == 0) {
                                alert("Kesilapan ketika memuatnaik data !!");
                            }


                        }
                    });

                } else {
                    alert(" Aplikasi mempunyai masalah untuk muatnaik gamber blackbox!!");
                }

            }, function (error) {
                alert('error : ' + JSON.stringify(error));
            }, options);
        }
        //SECTION Jenis Kerja Aduan
        //NOTE UNDONE
        function aduan() {
            if (GambarSebelumFlag == 1 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                var dataFormreg = {
                    "daerah": listPending[i].Daerah,
                    "kumpulan": listPending[i].Kumpulan,
                    "jenisKerja": listPending[i].JenisKerja,
                    "latitude": listPending[i].Latitude,
                    "longitude": listPending[i].Longitude,
                    "noTiang": listPending[i].NoTiang,
                    "types": listPending[i].Types,
                    "ipc": listPending[i].IPC,
                    "pecu": listPending[i].Pecu,
                    "pecuqty": listPending[i].PecuQty,
                    "ipclantern": listPending[i].IPCLantern,
                    "lantern": listPending[i].Lantern,
                    "fuse": listPending[i].Fuse,
                    "contractor": listPending[i].Contractor,
                    "link": listPending[i].Link,
                    "dawailampu": listPending[i].DawaiLampu,
                    "dawaipanel": listPending[i].DawaiPanel,
                    "cout": listPending[i].Cout,
                    "rombaklampu": listPending[i].RombakLampu,
                    "bracket": listPending[i].Bracket,
                    "rombakpanel": listPending[i].RombakPanel,
                    "masa": listPending[i].Masa,
                    "gambartiang": GambarTiangVal,
                    "gambarsebelum": GambarSebelumVal,
                    "sclamp": listPending[i].SCLamp,
                    "rentis": listPending[i].Rentis,
                    "dead": listPending[i].Dead,
                    "cable": listPending[i].Cable,
                    "mini": listPending[i].Mini,
                    "pusing": listPending[i].Pusing,
                    "jumperlantern": listPending[i].JumperLantern,
                    "jumperservice": listPending[i].JumperService,
                    "hook": listPending[i].Hook,
                    "creepers": listPending[i].Creepers,
                    "color": kk,
                    "man": ll,
                    "helper": listPending[i].Helper,
                    "driver": listPending[i].Driver,
                    "shift": listPending[i].Shift,
                    "category": listPending[i].Category,
                    "jenislampu": listPending[i].JenisLampu,
                    "gambarselepas": GambarSelepasVal,
                    "ipc120185": listPending[i].IPC120185,
                    "ipc1695": listPending[i].IPC1695,
                    "ipc20185": listPending[i].IPC20185,
                    "ipc1670": listPending[i].IPC1670,
                    "ipc2550": listPending[i].IPC2550,
                    "catatan": listPending[i].Catatan

                };

                localStorage.setItem("Flag", i);

                var dataString = JSON.stringify(dataFormreg);
                $.ajax({
                    url: 'http://1.32.96.10/ProLight/mimi/aduan3.php',
                    data: {
                        myData: dataString
                    },
                    type: 'POST',
                    success: function (response) {
                        //TODO loading interface 
                        if (response == 1) {
                            var flagT = localStorage.getItem("Flag");
                            remove(flagT);
                        } else if (response == 0) {
                            alert("Kesilapan ketika memuatnaik data !!");
                        }


                    }
                });
            } else if (GambarSebelumFlag == 1 || GambarTiangFlag == 1 || GambarSelepasFlag == 1) {
                //001
                if (GambarSebelumFlag == 0 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert(
                        "Aplikasi mempunyai masalah untuk menuatnaik fail gambar sebelum & gambar tiang !!");
                }
                // 010
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum & gambar selepas !!");
                }
                //011
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar sebelum !!");
                }
                //100
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 0) {
                    alert(
                        "Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang & gambar selepas !!");
                }
                //101
                else if (GambarSebelumFlag == 1 && GambarTiangFlag == 0 && GambarSelepasFlag == 1) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar tiang !!");
                }
                //110
                else if (GambarSebelumFlag == 0 && GambarTiangFlag == 1 && GambarSelepasFlag == 0) {
                    alert("Aplikasi mempunyai masalah untuk muatnaik fail gambar selepas !!");
                }
            } else {
                alert(" Aplikasi mempunyai masalah untuk muatnaik kesemua gamber !!");
            }
        }
        //SECTION Jenis Kerja Imbangan Barang
        //NOTE UNDONE

        //SECTION Jenis Kerja Imbangan Guna
        //NOTE UNDONE

    }

    function imbanganGuna() {
        var dataFormreg = {
            "daerah": listPending[i].Daerah,
            "kumpulan": listPending[i].Kumpulan,
            "jenisKerja": listPending[i].JenisKerja,
            "lan100w": listPending[i].Lan100w,
            "lan150w": listPending[i].Lan150w,
            "lan250w": listPending[i].Lan250w,
            "pecu": listPending[i].Pecu,
            "ipc120": listPending[i].IPC120,
            "ipc16": listPending[i].IPC16,
            "ipc70": listPending[i].IPC70,
            "ipc25": listPending[i].IPC25,
            "ipc169": listPending[i].IPC169,
            "bracket": listPending[i].Bracket,
            "wire25": listPending[i].Wire25,
            "contactor": listPending[i].Contactor,
            "fuse": listPending[i].Fuse,
            "panel": listPending[i].Panel,
            "fuseswitch": listPending[i].FuseSwitch,
            "bend": listPending[i].Bend,
            "cooper": listPending[i].Cooper,
            "wire1c": listPending[i].Wire1c,
            "mini": listPending[i].Mini,
            "chargeman": listPending[i].Chargeman,
            "helper": listPending[i].Helper,
            "driver": listPending[i].Driver,
            "shift": listPending[i].Shift,
            "lainlain": listPending[i].LainLain
        };

        localStorage.setItem("Flag", i);

        var dataString = JSON.stringify(dataFormreg);
        $.ajax({
            url: 'http://1.32.96.10/ProLight/mimi/imbanganguna.php',
            data: {
                myData: dataString
            },
            type: 'POST',
            success: function (response) {
                //TODO loading interface 
                alert(response);
                if (response == 1) {
                    var flagT = localStorage.getItem("Flag");
                    remove(flagT);
                } else if (response == 0) {
                    alert("Kesilapan ketika memuatnaik data !!");
                }


            }
        });
    }

    function imbanganBarang() {
        var dataFormreg = {
            "daerah": listPending[i].Daerah,
            "kumpulan": listPending[i].Kumpulan,
            "jenisKerja": listPending[i].JenisKerja,
            "lan100w": listPending[i].Lan100w,
            "lan150w": listPending[i].Lan150w,
            "lan250w": listPending[i].Lan250w,
            "pecu": listPending[i].Pecu,
            "ipc120": listPending[i].IPC120,
            "ipc16": listPending[i].IPC16,
            "ipc70": listPending[i].IPC70,
            "ipc25": listPending[i].IPC25,
            "ipc169": listPending[i].IPC169,
            "bracket": listPending[i].Bracket,
            "wire25": listPending[i].Wire25,
            "contactor": listPending[i].Contactor,
            "fuse": listPending[i].Fuse,
            "panel": listPending[i].Panel,
            "fuseswitch": listPending[i].FuseSwitch,
            "bend": listPending[i].Bend,
            "cooper": listPending[i].Cooper,
            "wire1c": listPending[i].Wire1c,
            "mini": listPending[i].Mini,
            "chargeman": listPending[i].Chargeman,
            "helper": listPending[i].Helper,
            "driver": listPending[i].Driver,
            "shift": listPending[i].Shift,
            "lainlain": listPending[i].LainLain
        };

        localStorage.setItem("Flag", i);

        var dataString = JSON.stringify(dataFormreg);
        $.ajax({
            url: 'http://1.32.96.10/ProLight/mimi/imbangan.php',
            data: {
                myData: dataString
            },
            type: 'POST',
            success: function (response) {
                //TODO loading interface 
                alert(response);
                if (response == 1) {
                    var flagT = localStorage.getItem("Flag");
                    remove(flagT);
                } else if (response == 0) {
                    alert("Kesilapan ketika memuatnaik data !!");
                }


            }
        });
    }

    function senaraiSemak() {
        var dataFormreg = {
            "daerah": listPending[i].Daerah,
            "kumpulan": listPending[i].Kumpulan,
            "jenisKerja": listPending[i].JenisKerja,

            "stesen": listPending[i].Stesen,
            "penyelia": listPending[i].Penyelia,
            "tarikhsenggaraan": listPending[i].TarikhSenggaraan,
            "tempat": listPending[i].Tempat,
            "lampu100": listPending[i].Lampu100,
            "lampu150": listPending[i].Lampu150,
            "lampu250": listPending[i].Lampu250,
            "voltan": listPending[i].Voltan,
            "arus": listPending[i].Arus,
            "pecu": listPending[i].Pecu,
            "suismasa": listPending[i].SuisMasa,
            "kerosakan": listPending[i].Kerosakan,
            "terminal": listPending[i].Terminal,
            "fius": listPending[i].Fius,
            "sesentuh": listPending[i].Sesentuh,
            "gasket": listPending[i].Gasket,

            "keadaanpanel": listPending[i].KeadaanPanel,
            "lampu": listPending[i].Lampu,
            "pembumian": listPending[i].Pembumian,
            "pinpivot": listPending[i].PinPivot,
            "pincotter": listPending[i].PinCotter,
            "spring": formlistPending[i].Spring,
            "lainlain": listPending[i].LainLain,
            "titiksesentuh": listPending[i].TitikSesentuh,
            "gegelung": listPending[i].Gegelung,
            "fiusminor": listPending[i].FiusMinor,
            "catatan": listPending[i].Catatan
        };

        localStorage.setItem("Flag", i);

        var dataString = JSON.stringify(dataFormreg);
        $.ajax({
            url: 'http://1.32.96.10/ProLight/mimi/senaraisemak.php',
            data: {
                myData: dataString
            },
            type: 'POST',
            success: function (response) {
                //TODO loading interface 
                alert(response);
                if (response == 1) {
                    var flagT = localStorage.getItem("Flag");
                    remove(flagT);
                } else if (response == 0) {
                    alert("Kesilapan ketika memuatnaik data !!");
                }


            }
        });
    }

    function daftarAset() {
        if (GambarSebelumFlag == 1) {

            var dataFormreg = {
                "daerah": listPending[i].Daerah,
                "kumpulan": listPending[i].Kumpulan,
                "jenisKerja": listPending[i].JenisKerja,
                "latitude": listPending[i].Latitude,
                "longitude": listPending[i].Longitude,
                "output": listPending[i].Output,
                "gg": gambartiang,
                "masa": listPending[i].Masa,
                "noakaun": listPending[i].noAkaun,
                "namaakaun": listPending[i].NamaAkaun,
                "jenisakaun": listPending[i].JenisAkaun,
                "zon": listPending[i].Zon,
                "namajalan": listPending[i].NamaJalan,
                "puncabekalan": listPending[i].PuncaBekalan,
                "kawalanmasa": listPending[i].KawalanMasa,
                "jenama": listPending[i].Jenama,
                "size": listPending[i].Size,
                "unitpemula": listPending[i].UnitPemula,
                "carakawalan": listPending[i].CaraKawalan,
                "namapendaftar": listPending[i].NamaPendaftar,
                "warnalampu": listPending[i].WarnaLampu,
                "bacaanbebansebelum": listPending[i].BacaanBebanSebelum,
                "notiang": listPending[i].NoTiang,
                "team": listPending[i].Team,
                "selenggara": listPending[i].Selenggara,
                "bacaanbebanselepas": listPending[i].BacaanBebanSelepas,
                "shift": listPending[i].Shift,
                "jenislampu": listPending[i].JenisLampu,
                "catatan": listPending[i].Catatan

            };

            localStorage.setItem("Flag", i);

            var dataString = JSON.stringify(dataFormreg);
            $.ajax({
                url: 'http://1.32.96.10/ProLight/mimi/daftaraset.php',
                data: {
                    myData: dataString
                },
                type: 'POST',
                success: function (response) {
                    //TODO loading interface 
                    alert(response);
                    if (response == 1) {
                        var flagT = localStorage.getItem("Flag");
                        remove(flagT);
                    } else if (response == 0) {
                        alert("Kesilapan ketika memuatnaik data !!");
                    }


                }
            });

        } else {
            alert(" Aplikasi mempunyai masalah untuk muatnaik gamber blackbox!!");
        }
    }



    //ANCHOR REMOVE FUNCTION
    function remove(i) {
        //NOTE function untuk hantar object ke page lain

        //NOTE todayDone object baru untuk digunakan untuk list yang dah settle hanter ke server
        var todayDone = JSON.parse(localStorage.getItem('todayDone'));
        //NOTE check size of todayDone if 0 --> todayDone is empty else todayDone dah ada value yang que dalam tu
        var sizeOfList = Object.objsize(todayDone);

        //NOTE get all pending list to send
        var listPending = JSON.parse(localStorage.getItem('listPending'));

        // NOTE the data will move to new object before delete
        //NOTE "i" represent which object is selected to send to another object
        //FIXME the object skip que
        //FIXME need to do a loop like ticket3.html
        var data = {};

        data[0] = {
            "Daerah": listPending[i].Daerah,
            "Kumpulan": listPending[i].Kumpulan,
            "JenisKerja": listPending[i].JenisKerja,
            "Latitude": listPending[i].Latitude,
            "Longitude": listPending[i].Longitude,
            "NoTiang": listPending[i].NoTiang,
            "Masa": listPending[i].Masa,
            "IPC": listPending[i].IPC,
            "Pecu": listPending[i].Pecu,
            "PecuQty": listPending[i].PecuQty,
            "IPCLantern": listPending[i].IPCLantern,
            "Lantern": listPending[i].Lantern,
            "Blackbox": listPending[i].Blackbox,
            "Fuse": listPending[i].Fuse,
            "Contractor": listPending[i].Contractor,
            "Link": listPending[i].Link,
            "DawaiLampu": listPending[i].DawaiLampu,
            "DawaiPanel": listPending[i].DawaiPanel,
            "Cout": listPending[i].Cout,
            "RombakLampu": listPending[i].RombakLampu,
            "Bracket": listPending[i].Bracket,
            "RombakPanel": listPending[i].RombakPanel,
            "Output": listPending[i].Output,
            "Clamp": listPending[i].Clamp,
            "Rentis": listPending[i].Rentis,
            "Dead": listPending[i].Dead,
            "Cable": listPending[i].Cable,
            "Mini": listPending[i].Mini,
            "Pusing": listPending[i].Pusing,
            "JumperLantern": listPending[i].JumperLantern,
            "JumperService": listPending[i].JumperService,
            "Hook": listPending[i].Hook,
            "Creepers": listPending[i].Creepers,
            "LanternWarranty": listPending[i].LanternWarranty,
            "ColorCode": listPending[i].ColorCode,
            "TarikhTukar": listPending[i].TarikhTukar,
            "SetLantern": listPending[i].SetLantern,
            "TukarIPC": listPending[i].TukarIPC,
            "LampuRosak": listPending[i].LampuRosak,
            "Category": listPending[i].Category,
            "JenisLampu": listPending[i].JenisLampu,
            "Chargeman": listPending[i].Chargeman,
            "Helper": listPending[i].Helper,
            "Driver": listPending[i].Driver,
            "Shift": listPending[i].Shift,
            "Ticket": listPending[i].Ticket,
            "Zon": listPending[i].Zon,
            "Bekalan": listPending[i].Bekalan,
            "Jalan": listPending[i].Jalan,
            "Lokasi": listPending[i].Lokasi,
            "Jenama": listPending[i].Jenama,
            "Size": listPending[i].Size,
            "IPC120185": listPending[i].IPC120185,
            "IPC1695": listPending[i].IPC1695,
            "IPC20185": listPending[i].IPC20185,
            "IPC1670": listPending[i].IPC1670,
            "IPC2550": listPending[i].IPC2550,
            "Catatan": listPending[i].Catatan,
            "GambarSelepasURI": listPending[i].GambarSelepasURI,
            "GambarSebelumURI": listPending[i].GambarSebelumURI,
            "GambarTiangURI": listPending[i].GambarTiangURI,
            "GambarSelepas": listPending[i].GambarSelepas,
            "GambarSebelum": listPending[i].GambarSebelum,
            "GambarTiang": listPending[i].GambarTiang,
            "Done": "0"
        };
        localStorage.setItem('todayDoneTemp', JSON.stringify(data));

        if (sizeOfList == 0) {
            localStorage.setItem('todayDone', JSON.stringify(data));
        } else if (sizeOfList > 0) {
            var dataTemp = {};
            for (x = 0; x < sizeOfList; x++) {
                var listPending = JSON.parse(localStorage.getItem('todayDone'));
                dataTemp[x] = {
                    "Daerah": listPending[x].Daerah,
                    "Kumpulan": listPending[x].Kumpulan,
                    "JenisKerja": listPending[x].JenisKerja,
                    "Latitude": listPending[x].Latitude,
                    "Longitude": listPending[x].Longitude,
                    "NoTiang": listPending[x].NoTiang,
                    "Masa": listPending[x].Masa,
                    "IPC": listPending[x].IPC,
                    "Pecu": listPending[x].Pecu,
                    "PecuQty": listPending[x].PecuQty,
                    "IPCLantern": listPending[x].IPCLantern,
                    "Lantern": listPending[x].Lantern,
                    "Blackbox": listPending[x].Blackbox,
                    "Fuse": listPending[x].Fuse,
                    "Contractor": listPending[x].Contractor,
                    "Link": listPending[x].Link,
                    "DawaiLampu": listPending[x].DawaiLampu,
                    "DawaiPanel": listPending[x].DawaiPanel,
                    "Cout": listPending[x].Cout,
                    "RombakLampu": listPending[x].RombakLampu,
                    "Bracket": listPending[x].Bracket,
                    "RombakPanel": listPending[x].RombakPanel,
                    "Clamp": listPending[x].Clamp,
                    "Rentis": listPending[x].Rentis,
                    "Dead": listPending[x].Dead,
                    "Cable": listPending[x].Cable,
                    "Mini": listPending[x].Mini,
                    "Pusing": listPending[x].Pusing,
                    "JumperLantern": listPending[x].JumperLantern,
                    "JumperService": listPending[x].JumperService,
                    "Hook": listPending[x].Hook,
                    "Creepers": listPending[x].Creepers,
                    "LanternWarranty": listPending[x].LanternWarranty,
                    "ColorCode": listPending[x].ColorCode,
                    "TarikhTukar": listPending[x].TarikhTukar,
                    "SetLantern": listPending[x].SetLantern,
                    "TukarIPC": listPending[x].TukarIPC,
                    "LampuRosak": listPending[x].LampuRosak,
                    "Category": listPending[x].Category,
                    "JenisLampu": listPending[x].JenisLampu,
                    "Chargeman": listPending[x].Chargeman,
                    "Helper": listPending[x].Helper,
                    "Driver": listPending[x].Driver,
                    "Shift": listPending[x].Shift,
                    "Ticket": listPending[x].Ticket,
                    "Zon": listPending[x].Zon,
                    "Bekalan": listPending[x].Bekalan,
                    "Jalan": listPending[x].Jalan,
                    "Lokasi": listPending[x].Lokasi,
                    "Jenama": listPending[x].Jenama,
                    "Size": listPending[x].Size,
                    "IPC120185": listPending[x].IPC120185,
                    "IPC1695": listPending[x].IPC1695,
                    "IPC20185": listPending[x].IPC20185,
                    "IPC1670": listPending[x].IPC1670,
                    "IPC2550": listPending[x].IPC2550,
                    "Catatan": listPending[x].Catatan,
                    "GambarSelepasURI": listPending[x].GambarSelepasURI,
                    "GambarSebelumURI": listPending[x].GambarSebelumURI,
                    "GambarTiangURI": listPending[x].GambarTiangURI,
                    "GambarSelepas": listPending[x].GambarSelepas,
                    "GambarSebelum": listPending[x].GambarSebelum,
                    "GambarTiang": listPending[x].GambarTiang,
                    "Done": "0"
                };
            }
            var listPending = JSON.parse(localStorage.getItem('todayDoneTemp'));
            dataTemp[sizeOfList] = {
                "Daerah": listPending[0].Daerah,
                "Kumpulan": listPending[0].Kumpulan,
                "JenisKerja": listPending[0].JenisKerja,
                "Latitude": listPending[0].Latitude,
                "Longitude": listPending[0].Longitude,
                "NoTiang": listPending[0].NoTiang,
                "Masa": listPending[0].Masa,
                "IPC": listPending[0].IPC,
                "Pecu": listPending[0].Pecu,
                "PecuQty": listPending[0].PecuQty,
                "IPCLantern": listPending[0].IPCLantern,
                "Lantern": listPending[0].Lantern,
                "Blackbox": listPending[0].Blackbox,
                "Fuse": listPending[0].Fuse,
                "Contractor": listPending[0].Contractor,
                "Link": listPending[0].Link,
                "DawaiLampu": listPending[0].DawaiLampu,
                "DawaiPanel": listPending[0].DawaiPanel,
                "Cout": listPending[0].Cout,
                "RombakLampu": listPending[0].RombakLampu,
                "Bracket": listPending[0].Bracket,
                "RombakPanel": listPending[0].RombakPanel,
                "Output": listPending[0].Output,
                "Clamp": listPending[0].Clamp,
                "Rentis": listPending[0].Rentis,
                "Dead": listPending[0].Dead,
                "Cable": listPending[0].Cable,
                "Mini": listPending[0].Mini,
                "Pusing": listPending[0].Pusing,
                "JumperLantern": listPending[0].JumperLantern,
                "JumperService": listPending[0].JumperService,
                "Hook": listPending[0].Hook,
                "Creepers": listPending[0].Creepers,
                "LanternWarranty": listPending[0].LanternWarranty,
                "ColorCode": listPending[0].ColorCode,
                "TarikhTukar": listPending[0].TarikhTukar,
                "SetLantern": listPending[0].SetLantern,
                "TukarIPC": listPending[0].TukarIPC,
                "LampuRosak": listPending[0].LampuRosak,
                "Category": listPending[0].Category,
                "JenisLampu": listPending[0].JenisLampu,
                "Chargeman": listPending[0].Chargeman,
                "Helper": listPending[0].Helper,
                "Driver": listPending[0].Driver,
                "Shift": listPending[0].Shift,
                "Ticket": listPending[0].Ticket,
                "Zon": listPending[0].Zon,
                "Bekalan": listPending[0].Bekalan,
                "Jalan": listPending[0].Jalan,
                "Lokasi": listPending[0].Lokasi,
                "Jenama": listPending[0].Jenama,
                "Size": listPending[0].Size,
                "IPC120185": listPending[0].IPC120185,
                "IPC1695": listPending[0].IPC1695,
                "IPC20185": listPending[0].IPC20185,
                "IPC1670": listPending[0].IPC1670,
                "IPC2550": listPending[0].IPC2550,
                "Catatan": listPending[0].Catatan,
                "GambarSelepasURI": listPending[0].GambarSelepasURI,
                "GambarSebelumURI": listPending[0].GambarSebelumURI,
                "GambarTiangURI": listPending[0].GambarTiangURI,
                "GambarSelepas": listPending[0].GambarSelepas,
                "GambarSebelum": listPending[0].GambarSebelum,
                "GambarTiang": listPending[0].GambarTiang,
                "Done": "0"
            };
            localStorage.setItem('todayDone', JSON.stringify(dataTemp));
        }

        //NOTE all data duplicate to todayDone before remove from listPending


        var listPending = JSON.parse(localStorage.getItem('listPending'));
        delete listPending[i];
        localStorage.setItem('listPending', JSON.stringify(listPending));
        var listPending = JSON.parse(localStorage.getItem('listPending'));
        var sizeOfList = Object.objsize(listPending);
        //document.getElementById("load").innerHTML = "<div class='hidden'></div>";
        location.reload();
        alert("Berjaya !!");
        location.href = "laporanDone.html";
    }

    //process after send
</script>

</html>